<!DOCTYPE html>
<!-- This page was generated by GitHub Pages using the Cayman theme by Jason Long -->
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>141B: Data Wrangling 2</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="../stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="../stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">141B: Lesson 8</h1>
      <h2 class="project-tagline">Data Wrangling 2</h2>
    </section>

    <section class="main-content">

<h2>Indexing and Timeseries</h2>      

<h3>Follow along with the <a href="code/pandas_intro.ipynb">python notebook</a>, jump to the indexing section.</h3>

<p>
We have talked abstractly about indexing, but it is fundamental to Pandas, so we should probably look at it in greater detail.
One common paradym is indexing by a datetime.
The index does not necessarily have to give you a unique row, and so when you select a datetime using <code>loc</code> then it'll return multiple records.
The advantage of an index is that it makes merging, combining, and joinging tables make sense.
For example, if you want to add the number of passengers that fly out of two airports within each month but summing two dataframes corresponding to the airports, then this can make that easy.
In the next lesson we will see how you can join, query, etc. and for that indexing will be critical.
</p>

<h3>Checkpoint: Skim the <a href="http://pandas.pydata.org/pandas-docs/stable/timeseries.html">section on timeseries</a> and <a href="http://pandas.pydata.org/pandas-docs/stable/indexing.html">section on indexing</a>. </h3>

      <div class="youtube">
<iframe width="560" height="315" src="https://www.youtube.com/embed/RnrZco22y3c" frameborder="0" allowfullscreen></iframe>
<b>Indexing DataFrames</b></div>

<p>
  You can use multiple indices by setting multiple variables to be indices.
  Then the indices are hierarchical, in lookups work by narrowing down the records by the first index and then using the second index, etc.
  Then typically, if you want to use methods like <code>groupby</code> you have to specify the level of the indices that you would like to group by.
</p>

<h3>Checkpoint: Read over the <a href="http://pandas.pydata.org/pandas-docs/stable/advanced.html">multiindex documentation</a>. 
      
<h2>Groupby, Join</h2>

<p>
  The <code>groupby</code> method makes it easy to group the dataframe by a variable.
  In the next example example, we have a dataset of voting results by precinct, and there are many precincts in a county, then we can group the precincts by county.
  The result of <code>groupby</code> is a groupby object to which you can aggregate with <code>sum, count, std, etc.</code>.
  So in the example, sum the votes for all precincts within a given count by doing <code>OH.groupby(by='County Name').sum()</code> which first groups the record by the county and then sums all of the records in a county.
  The result is a dataframe where each record corresponds to a county.
  This example aggregates, but you can also apply transformations and filter by group.
</p>

<h3>Checkpoint: Read over the <a href="http://pandas.pydata.org/pandas-docs/stable/groupby.html">groupby doc page</a>.</h3>

  <p>
    Suppose you have two datasets that you need to combine.
    If the dataframes share an indexing variable, then you can join these by that index.
    Call one dataset the left and the other the right dataframe.
    Then what happens when multiple matches occur for a given record in the left or the right dataframe?
    The depends on how you want to join.
    If you do a left join then it we return a dataframe with the same size as the left dataframe, and the variables from the right dataframe.
    When no match occurs then the right variables are filled with NaN.
    Right join works in the opposite way.
  </p>
  <p>
    Inner join is similar except that it will not return records that do not have a match.
    Outer join can be thought of the .
    A nice visualization with corresponding SQL code can be found <a href="https://www.codeproject.com/kb/database/visual_sql_joins.aspx">here</a>.
    <code>left.join(right)</code> joins the left dataframe to the right dataframe by the index using left join.
  </p>

  <h3>Checkpoint: Read the <a href="http://pandas.pydata.org/pandas-docs/stable/merging.html">section on Join in the Pandas doc</a>.</h3>

  <h3>Checkpoint: Go back through the <a href="code/Matplotlib.ipynb">Matplotlib.ipynb notebook</a> and look through all of the ways that we manipulate and join dataframes.</h3>
  
  <p>Here is my analysis of the Ohio voting results for the 2016 presidential election.
    You can follow along in the <a href="code/OHmunging.ipynb">OHmunging.ipynb notebook file</a>.
    </p>
    
      <div class="youtube">
<iframe width="560" height="315" src="https://www.youtube.com/embed/UfBmuik1uZU" frameborder="0" allowfullscreen></iframe>
	<b>OH munging: reading and processing the OH voting dataset</b>
      </div>

      <div class="youtube">
<iframe width="560" height="315" src="https://www.youtube.com/embed/7JAk_w97X_E" frameborder="0" allowfullscreen></iframe>
	<b>OH munging: grouping by county</b>
      </div>

            <div class="youtube">
<iframe width="560" height="315" src="https://www.youtube.com/embed/_ZZsVZSivJw" frameborder="0" allowfullscreen></iframe>
	<b>OH munging: understanding the relationships between candidate votes</b>
      </div>

	          <div class="youtube">
<iframe width="560" height="315" src="https://www.youtube.com/embed/31xyEmQCWbQ" frameborder="0" allowfullscreen></iframe>
	<b>OH munging: joining, comparing voting systems</b>
      </div>

      
     <footer class="site-footer">
	Copyright James Sharpnack &copy; 2016
     </footer>
     
    </section>

  
  </body>
</html>
